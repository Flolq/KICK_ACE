
<div class="container" data-controller = "budget-update enable-button search disable-add">
  <h1>Starting a new round of bids!</h1>

  <% unless @current_user_secured_selections.empty? %>
    <%= render 'my_team' %>
  <% end %>

  <% unless @opponents_secured_selections.empty? %>
    <%= render 'opponents_bids' %>
  <% end %>

    <div class="d-flex justify-content-center" data-budget-update-target= "recap">
        <h4>Remaining budget: </h4> <h4 data-budget-update-target = "budget" data-enable-button-target = "budget"> <%= @team.budget %> </h4> <p data-budget-update-target = "max" class="d-none"><%= @team.budget %> </p> <h4>mâ‚¬ </h4>
    </div>

  <%= link_to "SUBMIT YOUR BIDS", submitted_path(@league, @team), class:"btn btn-dark disabled", data: {enable_button_target: "button" } %>

    <%= form_with url: bidding_path(@league,@team), method: :get, html: { class:
      'mb-4', data: { search_target: 'form' } } do |f| %>
      <%= f.text_field :query,
                      class: "form-control",
                      placeholder: 'Search players',
                      value: params[:query],
                      data: { search_target: 'input', action: 'keyup->search#update' } %>
                      <% end %>

  <div class="container d-flex" data-controller="players-selection counter">

    <%= render 'list', players: @remaining_players %>


    <div class="my_team m-5 w-75" data-controller = "create-selection display-warning">
      <ul class="list-group" id="team" data-players-selection-target="team">
        <li class="list-group-item"> <strong>MY TEAM: </strong> </li>
        <li class="list-group-item"> Number of players left to obtain: <div  data-counter-target = "counter" data-disable-add-target = "counter" > <%= 8-@current_user_secured_selections.length %></div><div class="d-none" data-enable-button-target="required"><%= 8-@current_user_secured_selections.length %></div>  </li>
      </ul>
    </div>
  </div>

</div>
