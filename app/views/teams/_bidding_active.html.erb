
<div class="container" data-controller = "budget-update enable-button search disable-add">
  <h1>Place your bids!</h1>

  <% unless @current_user_secured_selections.empty? %>
    <%= render 'my_team' %>
  <% end %>

  <% unless @opponents_secured_selections.empty? %>
    <%= render 'opponents_bids' %>
  <% end %>

  <div>
    <%= form_with url: bidding_path(@league,@team), method: :get, html: { class:
      'mb-4', data: { search_target: 'form' } } do |f| %>
      <%= f.text_field :query,
                      class: "form-control search-box",
                      placeholder: 'Search players',
                      value: params[:query],
                      data: { search_target: 'input', action: 'keyup->search#update' } %>
                      <% end %>
    </div>


    <div class="d-flex justify-content-between" data-budget-update-target= "recap">
        <p class= "title">Remaining budget (mâ‚¬): </p> <p class= "title" data-budget-update-target = "budget" data-enable-button-target = "budget"> <%= @team.budget %> </p> <p data-budget-update-target = "max" class="d-none"><%= @team.budget %> </p>
    </div>


  <div class="container" data-controller="players-selection counter" data-search-target = "players">
  <p class="title">Available players</p>


    <%= render 'list', players: @remaining_players %>

    <div class="my_team m-5 w-75" data-controller = "create-selection display-warning">
      <ul class="list-group" id="team" data-players-selection-target="team">
        <li class="list-group-item"> <strong>MY TEAM: </strong> </li>
        <li class="list-group-item"> Number of players left to obtain: <div  data-counter-target = "counter" data-disable-add-target = "counter" > <%= 8-@current_user_secured_selections.length %></div><div class="d-none" data-enable-button-target="required"><%= 8-@current_user_secured_selections.length %></div>  </li>
      </ul>
    </div>
  </div>

    <%= link_to "SUBMIT YOUR BIDS", submitted_path(@league, @team), class:"btn btn-dark disabled", data: {enable_button_target: "button" } %>


</div>
